var meister=angular.module("meister",["ngMaterial","ngAnimate","ngMessages","ngAria","ui.router","ngCookies","md.data.table"]);meister.constant("SERVER_BASE_URL","http://localhost:8000/api"),function(t){t.config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/login"),t.state("login",{url:"/login",templateUrl:"partials/login-partial.html",controller:"LoginController"}).state("home",{url:"/",templateUrl:"partials/home-partial.html",controller:"HomeController"}).state("about",{url:"/about",templateUrl:"partials/about-partial.html",controller:"AboutController"}).state("claims",{url:"/claims",templateUrl:"partials/claims-partial.html",controller:"ClaimsController"}).state("claim-details",{url:"/claims-details",templateUrl:"partials/claim-details-partial.html",controller:"ClaimDetailsController",params:{claimno:""}})}]).run(["$rootScope","$location","$cookieStore","$http",function(t,e,o,n){t.globals=o.get("globals")||{},t.globals.currentUser&&(n.defaults.headers.common.Authorization="Basic "+t.globals.currentUser.authdata),t.$on("$locationChangeStart",function(o,n,a){"/login"===e.path()||t.globals.currentUser||e.path("/")})}])}(meister),function(t){t.factory("AuthenticationService",["Base64","$http","$cookieStore","$rootScope","$timeout",function(t,e,o,n,a){var i={};return i.Login=function(t,e,o){a(function(){var n={success:"arosenthal"===t&&"Pa55word."===e};n.success||(n.message="Username or password is incorrect"),o(n)},1e3)},i.SetCredentials=function(a,i){var l=t.encode(a+":"+i);n.globals={currentUser:{username:a,authdata:l}},e.defaults.headers.common.Authorization="Basic "+l,o.put("globals",n.globals)},i.ClearCredentials=function(){n.globals={},o.remove("globals"),e.defaults.headers.common.Authorization="Basic "},i}]).factory("Base64",function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(e){var o,n,a,i,l,r="",c="",s="",u=0;do{o=e.charCodeAt(u++),n=e.charCodeAt(u++),c=e.charCodeAt(u++),a=o>>2,i=(3&o)<<4|n>>4,l=(15&n)<<2|c>>6,s=63&c,isNaN(n)?l=s=64:isNaN(c)&&(s=64),r=r+t.charAt(a)+t.charAt(i)+t.charAt(l)+t.charAt(s),o=n=c="",a=i=l=s=""}while(u<e.length);return r},decode:function(e){var o,n,a,i,l,r="",c="",s="",u=0;/[^A-Za-z0-9\+\/\=]/g.exec(e)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{a=t.indexOf(e.charAt(u++)),i=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),s=t.indexOf(e.charAt(u++)),o=a<<2|i>>4,n=(15&i)<<4|l>>2,c=(3&l)<<6|s,r+=String.fromCharCode(o),64!=l&&(r+=String.fromCharCode(n)),64!=s&&(r+=String.fromCharCode(c)),o=n=c="",a=i=l=s=""}while(u<e.length);return r}}})}(meister),function(t){t.factory("apiUtils",["$http","SERVER_BASE_URL",function(t,e){var o=e,n=function(t,e,n,a){var i={};return i.method=t,i.url=o+e,i.params=n||{},a&&(i.data=a),i},a={};return a.get=function(e,o,a){var i=n("GET",e,o,null);t(i).then(function(t){a(null,t.data)},function(t){a(t,null)})},a.post=function(e,o,a){var i=n("POST",e,null,o);t(i).then(function(t){a(null,t.data)},function(t){a(t,null)})},a.put=function(e,o,a){var i=n("PUT",e,null,o);t(i).then(function(t){a(null,t.data)},function(t){a(t,null)})},a.del=function(e,o,a){var i=n("DELETE",e,o,a);t(i).then(function(t){a(null,t.data)},function(t){a(t,null)})},a}])}(meister),function(t){t.factory("ClaimsService",["$http","SERVER_BASE_URL",function(t,e){var o={};return o.getList=function(){return t.get(e+"/claims")},o.getListDetails=function(){return t.get(e+"/claims/details")},o.getDetails=function(o){return t.get(e+"/claims/detail/"+o)},o.simulate=function(o){return t.get(e+'/claims/simulate?Json={"CLAIMNO":"'+o+'"}')},o}])}(meister),function(t){t.controller("AboutController",["$scope",function(t){}])}(meister),function(t){t.controller("ClaimDetailsController",["$scope","$timeout","$mdSidenav","$state","$mdMenu","$mdDialog","$stateParams","ClaimsService",function(t,e,o,n,a,i,l,r){t.claim={},t.tabSelected=1,t.is_simulated=!1,t.simulations=[],t.init=function(){console.log(l),t.promise=r.getDetails(l.claimno),t.promise.then(function(e){console.log("ClaimsService.getDetails",e),t.claim=e.data},function(t){console.log("failure loading claim details",t)})},_.forEach(t.budgets,function(t){t.$show=!1}),t.simulate=function(){t.promise2=r.simulate(l.claimno),t.promise2.then(function(e){t.is_simulated=!0,console.log("ClaimsService.simulate",e),e.data&&e.data.length>0&&(t.simulations=e.data[0])},function(t){console.log("failure loading claim simulate",t)})},t.aproveConfirm=function(e){var o=i.confirm().title("You are about to Approve the following").textContent("You are about to Approve Claim No 000400000105").targetEvent(e).ok("Aprove").cancel("cancel");i.show(o).then(function(){t.aprove(e)},function(){t.status="You decided to keep your debt."})},t.aprove=function(t){i.show(i.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Successful").textContent("Claim 000400000105 is Approved").ok("Ok").targetEvent(t)).then(function(){n.go("claims")})}}])}(meister),function(t){t.controller("ClaimsController",["$scope","$timeout","$mdSidenav","$mdMenu","$state","$mdDialog","ClaimsService",function(t,e,o,n,a,i,l){function r(t){return function(){o(t).toggle()}}t.toggleLeft=r("left"),t.toggleRight=r("right"),t.claims=[],t.claims_details=[],t.total=null,t.selected=[],t.gotoClaimDetails=function(t){0!=t.ACCEPTED&&a.go("claim-details",{claimno:t.CLAIM})},t.init=function(){t.promise1=l.getList(),t.promise2=l.getListDetails(),t.promise1.then(function(e){console.log("ClaimsService.getList",e),t.total=e.data.total,t.claims=e.data.data},function(t){console.log("failure loading claims",t)}),t.promise2.then(function(e){console.log("ClaimsService.getListDetails",e),t.claims_details=e.data.data},function(t){console.log("failure loading claims details",t)})},t.aproveConfirm=function(e){var o=i.confirm().title("You are about to Approve the following").textContent("You are about to Approve Claim No 000400000105").targetEvent(e).ok("Aprove").cancel("cancel");i.show(o).then(function(){t.aprove(e)},function(){t.status="You decided to keep your debt."})},t.aprove=function(t){i.show(i.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Successful").textContent("Claim 000400000105 is Approved").ok("Ok").targetEvent(t)).then(function(){a.go("claims")})}}])}(meister),function(t){t.controller("HomeController",["$scope","$rootScope","$timeout","$mdSidenav","$mdMenu","$state",function(t,e,o,n,a,i){function l(t){return function(){n(t).toggle()}}t.toggleLeft=l("left"),t.toggleRight=l("right"),e.gotoHome=function(){e.transition="fade-in",i.go("home")},e.gotoClaims=function(){i.go("claims")},e.openMenu=function(t,e){t(e)},e.transition="fade-in"}])}(meister),function(t){t.controller("LoginController",["$scope","$rootScope","$location","AuthenticationService",function(t,e,o,n){n.ClearCredentials(),t.login=function(){n.Login(t.username,t.password,function(e){e.success?(n.SetCredentials(t.username,t.password),o.path("/")):t.error=e.message})}}])}(meister);