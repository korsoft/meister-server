var meister=angular.module("meister",["ngMaterial","ngAnimate","ngSanitize","ngMessages","ngAria","ui.router","ngCookies","md.data.table","chart.js"]);meister.constant("SERVER_BASE_URL","http://localhost:8000/api"),meister.constant("USERID","DEMOUSER"),meister.constant("SO_BUSOBJECT","BUS2032"),meister.constant("PO_BUSOBJECT","BUS2012"),meister.constant("SALES_ORGANIZATION_FIELD","SALESORG"),meister.constant("DISTRIBUTION_CHANNEL_FIELD","DISTCHL"),meister.constant("DIVISION_FIELD","SALESDIV"),meister.constant("SALES_GROUP_FIELD","SALESGRP"),meister.constant("SALES_OFFICE_FIELD","SALESOFF"),meister.constant("CUSTOMER_NUMBER_FIELD","PARTNER"),meister.constant("VENDOR_FIELD","VENDOR"),meister.constant("PURCHASE_GROUP_FIELD","PORG"),function(e){e.config(["$stateProvider","$urlRouterProvider",function(e,o){o.otherwise("/login"),e.state("login",{url:"/login",templateUrl:"partials/login-partial.html",controller:"LoginController"}).state("home",{url:"/",templateUrl:"partials/home-partial.html",controller:"HomeController"}).state("about",{url:"/about",templateUrl:"partials/about-partial.html",controller:"AboutController"}).state("claims",{url:"/claims",templateUrl:"partials/claims-partial.html",controller:"ClaimsController",params:{filters:[]}}).state("sales_order",{url:"/SalesOrder",templateUrl:"partials/sales-order-partial.html",controller:"SalesOrderController",params:{filters:[]}}).state("purchase_order",{url:"/PurchaseOrder",templateUrl:"partials/purchase-order-partial.html",controller:"PurchaseOrderController",params:{filters:[]}}).state("reports",{url:"/reports",templateUrl:"partials/reports-partial.html",controller:"ReportsController",params:{filters:[]}}).state("reporting",{url:"/reporting",templateUrl:"partials/reporting-partial.html",controller:"ReportingController",params:{filters:[]}}).state("claim-details",{url:"/claims-details",templateUrl:"partials/claim-details-partial.html",controller:"ClaimDetailsController",params:{claimno:""}}).state("reports-summary",{url:"/reports-summary",templateUrl:"partials/reports-summary-partial.html",controller:"ReportSummaryController",params:{PKY:"",reportName:""}})}]).run(["$rootScope","$location","$cookieStore","$http",function(e,o,t,r){e.globals=t.get("globals")||{},e.globals.currentUser&&(r.defaults.headers.common.Authorization="Basic "+e.globals.currentUser.authdata),e.$on("$locationChangeStart",function(t,r,n){"/login"===o.path()||e.globals.currentUser||o.path("/")})}])}(meister),function(e){e.factory("AuthenticationService",["Base64","$http","$cookieStore","$rootScope","$timeout",function(e,o,t,r,n){var l={};return l.Login=function(e,o,t){n(function(){var r={success:"arosenthal"===e&&"Pa55word."===o};r.success||(r.message="Username or password is incorrect"),t(r)},1e3)},l.SetCredentials=function(n,l){var a=e.encode(n+":"+l);r.globals={currentUser:{username:n,authdata:a}},o.defaults.headers.common.Authorization="Basic "+a,t.put("globals",r.globals)},l.ClearCredentials=function(){r.globals={},t.remove("globals"),o.defaults.headers.common.Authorization="Basic "},l}]).factory("Base64",function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(o){var t,r,n,l,a,i="",s="",c="",d=0;do{t=o.charCodeAt(d++),r=o.charCodeAt(d++),s=o.charCodeAt(d++),n=t>>2,l=(3&t)<<4|r>>4,a=(15&r)<<2|s>>6,c=63&s,isNaN(r)?a=c=64:isNaN(s)&&(c=64),i=i+e.charAt(n)+e.charAt(l)+e.charAt(a)+e.charAt(c),t=r=s="",n=l=a=c=""}while(d<o.length);return i},decode:function(o){var t,r,n,l,a,i="",s="",c="",d=0;/[^A-Za-z0-9\+\/\=]/g.exec(o)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),o=o.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{n=e.indexOf(o.charAt(d++)),l=e.indexOf(o.charAt(d++)),a=e.indexOf(o.charAt(d++)),c=e.indexOf(o.charAt(d++)),t=n<<2|l>>4,r=(15&l)<<4|a>>2,s=(3&a)<<6|c,i+=String.fromCharCode(t),64!=a&&(i+=String.fromCharCode(r)),64!=c&&(i+=String.fromCharCode(s)),t=r=s="",n=l=a=c=""}while(d<o.length);return i}}})}(meister),function(e){e.factory("apiUtils",["$http","SERVER_BASE_URL",function(e,o){var t=o,r=function(e,o,r,n){var l={};return l.method=e,l.url=t+o,l.params=r||{},n&&(l.data=n),l},n={};return n.get=function(o,t,n){var l=r("GET",o,t,null);e(l).then(function(e){n(null,e.data)},function(e){n(e,null)})},n.post=function(o,t,n){var l=r("POST",o,null,t);e(l).then(function(e){n(null,e.data)},function(e){n(e,null)})},n.put=function(o,t,n){var l=r("PUT",o,null,t);e(l).then(function(e){n(null,e.data)},function(e){n(e,null)})},n.del=function(o,t,n){var l=r("DELETE",o,t,n);e(l).then(function(e){n(null,e.data)},function(e){n(e,null)})},n}])}(meister),function(e){e.factory("ClaimsService",["$http","SERVER_BASE_URL",function(e,o){var t={};return t.getList=function(){return e.get(o+"/claims")},t.getListDetails=function(){return e.get(o+"/claims/details")},t.getDetails=function(t){return e.get(o+"/claims/detail/"+t)},t.simulate=function(t){return e.get(o+'/claims/simulate?Json={"CLAIMNO":"'+t+'"}')},t.approve=function(t){var r="";return _.forEach(t,function(e){r+='{"CLAIMNO":"'+e+'"},'}),r=r.substring(0,r.length-1),e.get(o+"/claims/approve?Json=["+r+"]")},t}])}(meister),function(e){e.factory("ReportService",["$http","SERVER_BASE_URL",function(e,o){var t={};return t.getReports=function(){return e.get(o+"/reports")},t.getListReports=function(){return e.get(o+"/list_reports")},t.getDetails=function(t){return e.get(o+"/reports/detail/"+t)},t.schedule=function(t){return e.get(o+"/reports/schedule/"+t)},t.buildDataForGraphicReports=function(e){var o=_.groupBy(e,function(e){return e.PstngDate}),t={labels:[],data:[]};return _.each(o,function(e,o){t.labels.push(o);var r=0;_.each(e,function(e){r+=Number(e.Quantity.replace("-",""))}),t.data.push(r)}),t},t}])}(meister),function(e){e.factory("ReportingService",["$http","SERVER_BASE_URL",function(e,o){var t={};return t.execute=function(t,r){return e.get(o+"/demo/execute?Endpoint="+t+"&Json="+r)},t}])}(meister),function(e){e.factory("SalesOrderService",["$http","SERVER_BASE_URL",function(e,o){var t={};return t.execute=function(t,r){return e.get(o+"/demo/execute?Endpoint="+t+"&Json="+r)},t.buildSalesHistoryDataForGraphicReports=function(e){var o=_.groupBy(e,function(e){var o=e.DELIVERY_DATE.split("-");return o[0]+"-"+o[1]});console.log("salesHistoryGroupBy18LastMonths",o);for(var t=[],r=moment(),n=0;n<18;n++)t.push(r.format("YYYY-MM")),r=r.subtract(1,"months");t=t.reverse(),console.log("months",t);var l={labels:[],data:[]};return _.each(t,function(e){l.labels.push(e);var t=0;o[e]&&_.each(o[e],function(e){t+=e.NET_VALUE}),l.data.push(t)}),l},t.buildPoByVendorDataForGraphicReports=function(e){var o=_.groupBy(e,function(e){return e.order_date.substring(0,4)+"-"+e.order_date.substring(4,6)});console.log("salesHistoryGroupBy18LastMonths",o);for(var t=[],r=moment(),n=0;n<18;n++)t.push(r.format("YYYY-MM")),r=r.subtract(1,"months");t=t.reverse(),console.log("months",t);var l={labels:[],data:[]};return _.each(t,function(e){l.labels.push(e);var t=0;o[e]&&_.each(o[e],function(e){_.each(e.line_items,function(e){t+=Number(e.net_price)})}),l.data.push(t)}),l},t}])}(meister),function(e){e.controller("AboutController",["$scope",function(e){}])}(meister),function(e){e.controller("ClaimDetailsController",["$scope","$timeout","$mdSidenav","$state","$mdMedia","$mdMenu","$mdDialog","$stateParams","ClaimsService",function(e,o,t,r,n,l,a,i,s){e.claim={},e.tabSelected=1,e.is_simulated=!1,e.simulations=[],e.isMobileDevice=n("xs"),e.init=function(){console.log(i),e.promise=s.getDetails(i.claimno),e.promise.then(function(o){if(console.log("ClaimsService.getDetails",o),e.claim=o.data,e.isMobileDevice){var t=[];_.forEach(e.claim.BUDGETS,function(o){o.WBS_ELEMENT==e.claim.APPRAISAL.WBS&&t.push(o)}),e.claim.BUDGETS=t}},function(e){console.log("failure loading claim details",e)})},_.forEach(e.budgets,function(e){e.$show=!1}),e.simulate=function(){e.promise2=s.simulate(i.claimno),e.promise2.then(function(o){if(e.is_simulated=!0,console.log("ClaimsService.simulate",o),o.data&&o.data.length>0&&(e.simulations=o.data[0],e.isMobileDevice)){var t=[];_.forEach(e.simulations,function(o){o.WBS_ELEMENT==e.claim.APPRAISAL.WBS&&t.push(o)}),e.simulations=t}},function(e){console.log("failure loading claim simulate",e)})},e.aproveConfirm=function(o){var t=a.confirm().title("You are about to Approve the following").textContent("You are about to Approve Claim No "+i.claimno).targetEvent(o).ok("Aprove").cancel("cancel");a.show(t).then(function(){e.aprove(o)},function(){e.status="You decided to keep your debt."})},e.aprove=function(o){var t=[];t.push(i.claimno),e.promise3=s.approve(t),e.promise3.then(function(t){console.log("ClaimsService.approve",t),a.show(a.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Successful").textContent("Claim "+i.claimno+" is Approved").ok("Ok").targetEvent(o)).then(function(){r.go("claims",{filters:[e.claim]})})},function(e){console.log("failure loading claim simulate",e)})}}])}(meister),function(e){e.controller("ClaimsController",["$scope","$rootScope","$timeout","$mdSidenav","$mdMedia","$mdMenu","$state","$stateParams","$mdDialog","ClaimsService",function(e,o,t,r,n,l,a,i,s,c){function d(e){return function(){r(e).toggle()}}e.toggleLeft=d("left"),e.toggleRight=d("right"),e.claims=[],e.claims_details=[],e.total=null,e.selected=[],e.isMobileDevice=n("xs"),e.gotoClaimDetails=function(e){0!=e.ACCEPTED&&a.go("claim-details",{claimno:e.CLAIM})},e.init=function(t){if(console.log("init",t),console.log("params",i),e.total=null,e.claims=[],e.claims_details=[],e.promise1=c.getList(),e.promise2=c.getListDetails(),t&&e.selected.length>0){var r=angular.copy(e.selected);_.forEach(r,function(e){o.filters.push(e)}),e.selected=[]}i.filters.length>0&&_.forEach(i.filters,function(e){_.find(o.stateParamFilters,function(o){return o.CLAIM==e.CLAIM})||o.stateParamFilters.push(e)}),console.log("filtersByAprove",o.filters),console.log("filtersByAproveOnDetails",o.stateParamFilters),e.promise1.then(function(t){console.log("ClaimsService.getList",t),_.forEach(t.data.data,function(e){var r=_.filter(o.filters,function(o){return o.WBS==e.WBS}),n=_.filter(o.stateParamFilters,function(o){return o.APPRAISAL.WBS==e.WBS});(r.length>0||n.length>0)&&(console.log(n),t.data.total-=r.length+n.length,e.total-=r.length+n.length)}),_.forEach(t.data.data,function(o){o.total>0&&e.claims.push(o)}),e.total=t.data.total},function(e){console.log("failure loading claims",e)}),e.promise2.then(function(t){console.log("ClaimsService.getListDetails",t),_.forEach(t.data.data,function(t){var r=_.find(o.filters,function(e){return e.CLAIM==t.CLAIM}),n=_.find(o.stateParamFilters,function(e){return e.CLAIM==t.CLAIM});r||n||e.claims_details.push(t)})},function(e){console.log("failure loading claims details",e)})},e.showDetails=function(e){e.$showTooltip=!0},e.hideDetails=function(e){e.$showTooltip=!1},e.showDetails2=function(e){e.$showTooltip2=!0},e.hideDetails2=function(e){e.$showTooltip2=!1},e.aproveConfirm=function(o){console.log("Approve items selected",e.selected);var t="",r=[];_.forEach(e.selected,function(e){r.push(e.CLAIM),t+="Claim "+e.CLAIM+" on WBS "+e.WBS+" for amount $"+e.ACCEPTED.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")+"<br/>"});var n=s.confirm().title("You are about to Approve the following").htmlContent(t).targetEvent(o).ok("Aprove").cancel("cancel");s.show(n).then(function(){e.aprove(o,r)},function(){e.status="You decided to keep your debt."})},e.aprove=function(o,t){e.promise3=c.approve(t),e.promise3.then(function(t){console.log("ClaimsService.approve",t),s.show(s.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Successful").textContent("Selected Claims are Approved").ok("Ok").targetEvent(o)).then(function(){e.init(!0)})},function(e){console.log("failure loading claim simulate",e)})}}])}(meister),function(e){e.controller("HomeController",["$scope","$rootScope","$timeout","$mdSidenav","$mdMenu","$state","$mdMedia",function(e,o,t,r,n,l,a){function i(e){return function(){r(e).toggle()}}e.toggleLeft=i("left"),e.toggleRight=i("right"),e.isMobileDevice=a("xs"),e.isTabletDevice=a("sm"),e.isDesktop=a("gt-sm"),o.filters=[],o.stateParamFilters=[],o.gotoHome=function(){o.transition="fade-in",l.go("home")},o.gotoClaims=function(){l.go("claims")},o.gotoSalesOrder=function(){l.go("sales_order")},o.gotoPurchaseOrder=function(){l.go("purchase_order")},o.gotoMainReports=function(){l.go("reports")},o.gotoReporting=function(){l.go("reporting")},o.openMenu=function(e,o){e(o)},o.transition="fade-in"}])}(meister),function(e){e.controller("LoginController",["$scope","$rootScope","$location","AuthenticationService",function(e,o,t,r){r.ClearCredentials(),e.login=function(){r.Login(e.username,e.password,function(o){o.success?(r.SetCredentials(e.username,e.password),t.path("/")):e.error=o.message})}}])}(meister),function(e){e.controller("PurchaseOrderController",["$scope","$rootScope","$timeout","$filter","$mdSidenav","$mdMenu","$mdMedia","$state","$mdDialog","SalesOrderService","USERID","PO_BUSOBJECT","VENDOR_FIELD","PURCHASE_GROUP_FIELD",function(e,o,t,r,n,l,a,i,s,c,d,u,g,p){function f(e,o){return diff=Math.abs(e-o),ms=diff%1e3,diff=(diff-ms)/1e3,ss=diff%60,diff=(diff-ss)/60,mm=diff%60,diff=(diff-mm)/60,hh=diff%24,days=(diff-hh)/24,"Execution time "+hh+"."+mm+"."+ss+"."+ms+" hrs.min.sec.msec"}e.vendorArray=[{label:"1000 - C.E.B. USA",value:"1000"}],e.purchasingOrganizationArray=[{label:"3000 - BestRun USA",value:"1000"}],e.plantArray=[{label:"3000 - Chicago Plant",value:"3000"}],e.purchasegroupArray=[{label:"3000 - BestRun, USA",value:"001"}],e.orderArray=[{label:"4500022402",value:"4500022402"},{label:"New PO",value:"NEW"}],e.vendorSelected="",e.purchasingOrganizationSelected="",e.purchasegroupSelected="",e.plantSelected="",e.multiplier=10,e.materialCatalog=[],e.salesOrder=[],e.log="",e.materialSelected=[],e.salesOrderSelected=[],e.orderSelected=null,e.tabSelected=0,e.notes=[],e.salesHistory=[],e.salesHistorySelected=[],e.analytics=null,e.hiddenMaterial=!1,e.hiddenNotes=!1,e.note={type:"HDR",text:"",title:"Add Note",lineNumber:1};e.salesHistoryQuery={order:"po_number"},e.searchTextOrderNumber="",e.querySearch=function(o){var t=o?e.orderArray.filter(S(o)):e.orderArray;return 0==t.length&&t.push({label:o,value:o}),t};var S=function(e){return function(o){return o.label.toLowerCase().includes(e.toLowerCase())}};e.isMobileDevice=a("xs"),e.isTabletDevice=a("md")||a("sm"),e.isDesktop=a("gt-md"),e.collapseParterInfo=!0,e.collapseSalesSelection=!0,e.dataForGraphicReport=[],e.labelsForGraphicReport=[],e.chartOptions={scales:{yAxes:[{ticks:{callback:function(e,o,t){return r("currency")(e,"$",0)}}}]}},e.loadVendors=function(){console.log("loadVendors...");var o='[{"busobject":"'+u+'","userid":"'+d+'","levels":[{"field":"'+g+'","option":"","parent":"","seed":"","values":[{"value":""}]}]}]';e.log="Executing Get Vendors<br/>"+e.log;var t=new Date;e.loadVendorsProgress=c.execute("Meister.SDK.Dropdown",o),e.loadVendorsProgress.then(function(o){var r=new Date;console.log("SalesOrderService.execute result",o),e.log="Completed Get Vendors<br/>"+e.log,e.log=f(t,r)+"<br/>"+e.log,console.log(o.data.Json)},function(e){console.log("SalesOrderService.execute failure",e)})},e.loadPurchaseGroup=function(o){console.log("loadPurchaseGroup...");var t='[{"busobject":"'+u+'","userid":"'+d+'","levels":[{"field":"'+p+'","option":"","parent":"'+g+'","seed":"'+o+'","values":[{"value":""}]}]}]';e.log="Executing Get Purchase Group<br/>"+e.log;var r=new Date;e.loadVendorsProgress=c.execute("Meister.SDK.Dropdown",t),e.loadVendorsProgress.then(function(o){var t=new Date;console.log("SalesOrderService.execute result",o),e.log="Completed Get Purchase Group<br/>"+e.log,e.log=f(r,t)+"<br/>"+e.log,console.log(o.data.Json)},function(e){console.log("SalesOrderService.execute failure",e)})},e.changeVendor=function(o){console.log("changeVendor",o),e.loadPurchaseGroup(),e.loadMaterialCatalog(o),0==e.salesHistory.length&&e.getSalesPartner()},e.init=function(){e.loadVendors()},e.loadMaterialCatalog=function(){if(console.log("loadMaterialCatalog"),console.log("vendorSelected",e.vendorSelected),console.log("plantSelected",e.plantSelected),console.log("purchasingOrganizationSelected",e.purchasingOrganizationSelected),!e.vendorSelected||""==e.vendorSelected||!e.plantSelected||""==e.plantSelected||!e.purchasingOrganizationSelected||""==e.purchasingOrganizationSelected)return void(e.materialCatalog=[]);var o='{"VENDOR":"'+e.vendorSelected+'","PLANT":"'+e.plantSelected+'","PURORG":"'+e.purchasingOrganizationSelected+'"}';e.log="Executing Get Catalog<br/>"+e.log;var t=new Date;e.materialCatalogProgress=c.execute("Meister.Demo.Po.Mat.Catalog",o),e.materialCatalogProgress.then(function(o){var r=new Date;console.log("Vendor result",o),e.log="Completed Get Catalog<br/>"+e.log,e.log=f(t,r)+"<br/>"+e.log,e.materialCatalog=o.data.Json},function(e){console.log("SalesOrderService.execute failure",e)})},e.formatSORT_DATE=function(e){return e?8!=e.length?e:e.substring(4,6)+"/"+e.substring(6,8)+"/"+e.substring(0,4):""},e.saveNote=function(o){var t="",r="";"HDR"==e.note.type?(t="Meister.Demo.Po.Header.Notes",r='{"orderno":"'+e.orderSelected.value+'","notes":[{"TEXT":"'+e.note.text+'"}]}'):"LINE"==e.note.type&&(t="Meister.Demo.Po.Line.Notes",r='{"ORDERNO":"'+e.orderSelected.value+'","LINE_ITEM":"'+e.note.lineNumber+'","NOTES":[{"TEXT":"'+e.note.text+'"}]}'),console.log("endpoint",t),console.log("json",r),e.log="Executing Save Note<br/>"+e.log;var n=new Date;e.addNoteProgress=c.execute(t,r),e.addNoteProgress.then(function(o){var t=new Date;console.log("SaveNote result",o),e.log="Completed Save Note<br/>"+e.log,e.log=f(n,t)+"<br/>"+e.log,e.note={type:"HDR",text:"",lineNumber:1},e.getListNotesByOrder();var r=s.alert({title:"Note Added",textContent:"The note was added successful",ok:"OK"});s.show(r).finally(function(){r=void 0})},function(e){console.log("SalesOrderService.execute failure",e)})},e.addLines=function(){e.salesOrder=[];var o="Meister.Demo.PO.Add.LineItems";e.disableAddLines=!0;var t='{"Number":"'+e.orderSelected.value+'","repeat":"'+e.multiplier+'","Lineitem":[{"line_no":"00010","material":"'+e.materialSelected[0].MATERIAL+'","plant":"'+e.materialSelected[0].PLANT+'","qty":"'+Math.floor(100*Math.random())+'","price":"'+e.materialSelected[0].PRICE+'"}]}';console.log("endpoint",o),console.log("json",t),e.log="Executing Add Lines Operation<br/>"+e.log;var r=new Date;e.addLinesProgress=c.execute(o,t),e.addLinesProgress.then(function(o){e.disableAddLines=!1;var t=new Date;console.log("SalesOrderService.execute result",o),e.log="Completed Add Lines PO<br/>"+e.log,e.log=f(r,t)+"<br/>"+e.log,e.changeOrder(e.orderSelected)},function(o){e.disableAddLines=!1,console.log("SalesOrderService.execute failure",o)})},e.formatStandardDeviation=function(e){return e?e.substring(0,2)+"."+e.substring(2,4)+"%":""},e.onSelectMaterialRow=function(){console.log("onSelectMaterialRow",e.materialSelected),e.getSalesPartner()},e.notesFilter=function(o){return 0==e.salesOrderSelected.length?"HDR"==o.LINE.substring(0,3):Number(o.LINE.substring(0,e.salesOrderSelected[0].line_no.length))==Number(e.salesOrderSelected[0].line_no)},e.onSelectSalesOrderRow=function(){console.log("onSelectSalesOrderRow",e.salesOrderSelected),e.getListNotesByOrder()},e.hideMaterials=function(){e.hiddenMaterial=!0},e.showMaterials=function(){e.hiddenMaterial=!1},e.getListNotesByOrder=function(){console.log("Calculate getListNotesByOrder",e.orderSelected),e.notes=[];var o="Meister.Demo.PO.Notes.Read",t='{"ORDERNO":"'+e.orderSelected.value+'"}';console.log("endpoint",o),console.log("json",t),e.log="Executing Read Notes<br/>"+e.log;var r=new Date;e.getListNotesProgress=c.execute(o,t),e.getListNotesProgress.then(function(o){var t=new Date;console.log("getListNotesByOrder result",o),e.log="Completed Read Notes<br/>"+e.log,e.log=f(r,t)+"<br/>"+e.log,e.notes=o.data.Json,console.log("notes",e.notes)},function(e){console.log("SalesOrderService.execute failure",e)})},e.changeGeneric=function(){e.loadMaterialCatalog(),0==e.salesHistory.length&&e.getSalesPartner()},e.onSalesHistorySelected=function(){console.log("onSalesHistorySelected",e.salesHistorySelected)},e.getSalesPartner=function(){if(console.log("getSalesPartner..."),e.salesHistory=[],e.salesHistorySelected=[],e.dataForGraphicReport=[],e.labelsForGraphicReport=[],e.vendorSelected){var o="Meister.Demo.PO.By.Vendor",t='{"VENDOR":"'+e.vendorSelected+'"}';console.log("endpoint",o),console.log("json",t),e.log="Executing Get PO by Vendor Operation<br/>"+e.log;var r=new Date;e.salesPartnerProgress=c.execute(o,t),e.salesPartnerProgress.then(function(o){var t=new Date;console.log("Meister.Demo.PO.By.Vendor result",o),e.log="Completed PO by Vendor<br/>"+e.log,e.log=f(r,t)+"<br/>"+e.log,e.salesHistory=o.data.Json[0].po_hdrs,console.log("Histories",e.salesHistory);var n=c.buildPoByVendorDataForGraphicReports(e.salesHistory);console.log("report",n),e.dataForGraphicReport=n.data,e.labelsForGraphicReport=n.labels,console.log("dataForGraphicReport",e.dataForGraphicReport)},function(e){console.log("SalesOrderService.execute failure",e)})}},e.showAddNote=function(o){e.salesOrderSelected.length>0?(e.note.type="LINE",e.note.lineNumber=e.salesOrderSelected[0].line_no,e.note.title="Adding Notes to Line Item "+e.salesOrderSelected[0].line_no):(e.note.type="HDR",e.note.title="Adding Header notes"),s.show({contentElement:"#addNoteDialog",targetEvent:o,clickOutsideToClose:!0}),t(function(){document.getElementById("add_note").focus()},1e3)},e.showPartnerInfo=function(){console.log("showPartnerInfo..."),e.hiddenPartnerInfo=!1},e.hidePartnerInfo=function(){console.log("hidePartnerInfo..."),e.hiddenPartnerInfo=!0},e.showLogs=function(e){s.show({contentElement:"#myDialog",targetEvent:e,clickOutsideToClose:!0})},e.changeOrder=function(o){if(console.log("Order",o),!o)return void(e.salesOrder=[]);if("NEW"==o.value){e.salesOrder=[];var t="Meister.Demo.PO.New.OnHold",r='{"VENDOR":"'+e.vendorSelected+'","PURGRP":"'+e.purchasegroupSelected+'","PURORG":"'+e.purchasingOrganizationSelected+'"}';console.log("endpoint",t),console.log("json",r),e.log="Executing New SO<br/>"+e.log;var n=new Date;e.readOrderProgress=c.execute(t,r),e.readOrderProgress.then(function(o){var t=new Date;console.log("SalesOrderService.execute result",o),e.log="Completed New PO<br/>"+e.log,e.log=f(n,t)+"<br/>"+e.log;var r=o.data.Json[0].NUMBER,l={label:r,value:r};e.orderArray.push(l),e.orderSelected=l,e.getListNotesByOrder()},function(e){console.log("SalesOrderService.execute failure",e)})}else{e.getListNotesByOrder();var t="Meister.Demo.PO.Read",r='{"NUMBER":"'+o.value+'"}';e.log="Executing Read SO<br/>"+e.log;var n=new Date;e.readOrderProgress=c.execute(t,r),e.readOrderProgress.then(function(o){var t=new Date;e.disableAddLines=!1,console.log("SalesOrderService.execute result",o),e.log="Completed Read PO<br/>"+e.log,e.log=f(n,t)+"<br/>"+e.log,e.salesOrder=o.data.Json[0].lineitem},function(o){e.disableAddLines=!1,console.log("SalesOrderService.execute failure",o)})}}}])}(meister),function(e){e.controller("ReportingController",["$scope","$rootScope","$timeout","$filter","$mdSidenav","$mdMenu","$mdMedia","$state","$mdDialog","ReportingService",function(e,o,t,r,n,l,a,i,s,c){e.t_code_report_hint="",e.report={},e.reportSelected=[],e.loadingReports=!1,e.params=[],e.paramsSelected=[],e.loadingParams=!1,e.operations=["EQ","BT","NE","GT","LT","GE","LE"],e.loadingReportSchedule=!1,e.reportsFinder=function(){var o='[{"HINT":"'+e.t_code_report_hint+'"}]';e.report={},e.reportSelected=[],e.params=[],e.paramsSelected=[],e.loadingReports=!0,e.reportsFinderProgress=c.execute("Meister.SDK.Report.Finder",o),e.reportsFinderProgress.then(function(o){e.loadingReports=!1,console.log("reportsFinder => result",o);var t=o.data.Json[0].RESULTS;t.length>0?(e.report.columns=_.keys(t[0].ENUMS[0]),e.report.rows=t):e.report={},console.log("Reports =>",e.report)},function(o){e.loadingReports=!1,console.log("reportsFinder => failure",o)})},e.onReportSelected=function(){console.log("onReportSelected",e.reportSelected),e.loadParametersByReport()},e.loadParametersByReport=function(){if(e.params=[],e.paramsSelected=[],e.reportSelected.length>0){var o='{"REP_TCODE":"'+e.reportSelected[0].ENUMS[0].NAME+'"}';e.loadingParams=!0,e.paramsProgress=c.execute("Meister.SDK.Report.Parameters",o),e.paramsProgress.then(function(o){e.loadingParams=!1,console.log("loadParametersByReport => result",o),e.params=o.data.Json[0].SELECTIONS.METADATA[0].PARAMETERS,_.forEach(e.params,function(o){o.$edit=!1,o.$selected=!1,o.$operation=e.operations[0],"EQ"==o.$operation||"NE"==o.$operation?o.$from=[]:o.$from="",o.$to=""})},function(o){e.loadingReports=!1,console.log("loadParametersByReport => failure",o)})}},e.onParamSelected=function(e){e.$selected=!0,console.log("onParamSelected",e)},e.onParamUnSelected=function(e){e.$selected=!1,console.log("onParamUnSelected",e)},e.editParam=function(e){e.$edit=!0,e.$paramEdit=angular.copy(e)},e.updateParam=function(e){e.$edit=!1,e.$operation=e.$paramEdit.$operation,e.$from=e.$paramEdit.$from,e.$to=e.$paramEdit.$to,e.PARAMETER.NAME=e.$paramEdit.PARAMETER.NAME,delete e.$paramEdit},e.cancelEditParam=function(e){e.$edit=!1,delete e.$paramEdit},e.changeOperation=function(e){console.log("changeOperation",e),"EQ"==e.$paramEdit.$operation||"NE"==e.$paramEdit.$operation?e.$paramEdit.$from=[]:e.$paramEdit.$from="",e.$paramEdit.$to=""},e.outputFrom=function(e){if("EQ"==e.$operation||"NE"==e.$operation){var o="";return _.forEach(e.$from,function(e){o+=e+","}),o.length>0?o.substring(0,o.length-1):o}return e.$from},e.executeSchedule=function(){var o='[{"columns_named":"X","parameters":[';_.forEach(e.paramsSelected,function(e){"EQ"==e.$operation||"NE"==e.$operation?_.forEach(e.$from,function(t){o+='{"high":"'+t+'","kind":"S","low":"'+t+'","option":"'+e.$operation+'","selname":"'+e.PARAMETER.NAME+'","sign":"I"},'}):"BT"==e.$operation?o+='{"high":"'+e.$to+'","kind":"S","low":"'+e.$from+'","option":"BT","selname":"'+e.PARAMETER.NAME+'","sign":"I"},':o+='{"high":"'+e.$from+'","kind":"S","low":"'+e.$from+'","option":"'+e.$operation+'","selname":"'+e.PARAMETER.NAME+'","sign":"I"},'}),o=o.substring(0,o.length-1),o+='],"report":"'+e.reportSelected[0].ENUMS[0].NAME+'","username":"AROSENTHAL","variant":"","with_metadata":""}]',console.log("json",o)}}])}(meister),function(e){e.controller("ReportsController",["$scope","$timeout","$mdSidenav","$state","$mdMedia","$mdMenu","$mdDialog","$stateParams","$mdToast","ReportService",function(e,o,t,r,n,l,a,i,s,c){e.isMobileDevice=n("xs"),e.reports=[],e.list_reports=[],e.report="",e.selected=[],e.init=function(){e.promise2=c.getListReports(),e.promise2.then(function(o){console.log("ReportService.getListReports",o),e.list_reports=o.data,e.list_reports.length>0&&(e.reports.push(e.list_reports[0]),e.report=e.list_reports[0].REPORT_NAME)},function(e){console.log("failureReportService.getListReports",e)})},e.schedule=function(o,t){console.log("schedule",t),a.show(a.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Schedule Report successfull").textContent("Schedule Report success").ok("Ok").targetEvent(o)).then(function(){e.promise=c.schedule(t),e.promise.then(function(o){console.log("ReportService.schedule",o),e.init()},function(e){console.log("ReportService.schedule",e)})})},e.gotoReportSummary=function(e){"F"==e.STATUS?r.go("reports-summary",{PKY:e.PKY,reportName:e.REPORT_NAME}):s.show(s.simple().textContent("Report output is being prepared. Check back in a few minutes.").position("bottom").hideDelay(3e3))}}])}(meister),function(e){e.controller("ReportSummaryController",["$scope","$state","$mdMedia","$mdDialog","$stateParams","$timeout","ReportService",function(e,o,t,r,n,l,a){e.data=[],e.chartType="bar",e.isMobileDevice=t("xs"),e.chartData=[],e.labels=[],e.report_name="",e.filterDate="",e.chartOptions={onClick:function(o){var t=this.getElementAtEvent(o);if(t.length){var r=t[0]._index;l(function(){e.filterDate=e.labels[r]}),console.log(e.filterDate)}}},e.init=function(){console.log(n.PKY),e.report_name=n.reportName,e.promise=a.getDetails(n.PKY),e.promise.then(function(o){e.data=o.data,e.generateChart()},function(e){console.log("failure loading report details",e)})},e.gotoReports=function(){o.go("reports")},e.generateChart=function(){var o=a.buildDataForGraphicReports(e.data);e.chartData=o.data,e.labels=o.labels},e.removeFilters=function(){e.filterDate=""}}])}(meister),function(e){e.controller("SalesOrderController",["$scope","$rootScope","$timeout","$filter","$mdSidenav","$mdMenu","$mdMedia","$state","$mdDialog","SalesOrderService","USERID","SO_BUSOBJECT","SALES_ORGANIZATION_FIELD","DISTRIBUTION_CHANNEL_FIELD","DIVISION_FIELD","SALES_GROUP_FIELD","SALES_OFFICE_FIELD","CUSTOMER_NUMBER_FIELD",function(e,o,t,r,n,l,a,i,s,c,d,u,g,p,f,S,m,h){function v(e,o){return diff=Math.abs(e-o),ms=diff%1e3,diff=(diff-ms)/1e3,ss=diff%60,diff=(diff-ss)/60,mm=diff%60,diff=(diff-mm)/60,hh=diff%24,days=(diff-hh)/24,"Execution time "+hh+"."+mm+"."+ss+"."+ms+" hrs.min.sec.msec"}e.isMobileDevice=a("xs"),e.isTabletDevice=a("md")||a("sm"),e.isDesktop=a("gt-md"),e.shipToArray=[],e.soldToArray=[{label:"3000 - Smith Inc. LLC",value:"3000"}],e.payerArray=[{label:"3050 - Bush Holdings, Inc.",value:"3050"}],e.organizationArray=[],e.channelArray=[],e.divisionArray=[],e.officeArray=[],e.groupArray=[],e.orderArray=[{label:"20157",value:"20157"},{label:"New SO",value:"NEW"}],e.shipToSelected="",e.shipTo2Selected="",e.soldToSelected="",e.payerSelected="",e.organizationSelected="",e.channelSelected="",e.divisionSelected="",e.officeSelected="",e.groupSelected="",e.multiplier=10,e.materialCatalog=[],e.salesOrder=[],e.log="",e.materialSelected=[],e.salesOrderSelected=[],e.orderSelected=null,e.tabSelected=0,e.ats={},e.notes=[],e.salesHistory=[],e.salesMaterial=[],e.salesMaterialPage=[],e.salesHistorySelected=[],e.salesMaterialSelected=[],e.analytics=null,e.hiddenMaterial=!1,e.hiddenATP=!1,e.hiddenNotes=!1,e.note={type:"HDR",text:"",title:"Add Note",lineNumber:1};e.searchTextOrderNumber="",e.querySearch=function(o){var t=o?e.orderArray.filter(E(o)):e.orderArray;return 0==t.length&&t.push({label:o,value:o}),t};var E=function(e){return function(o){return o.label.toLowerCase().includes(e.toLowerCase())}};e.collapseParterInfo=!0,e.collapseSalesSelection=!0,e.dataForGraphicReport=[],e.labelsForGraphicReport=[],e.chartOptions={scales:{yAxes:[{ticks:{callback:function(e,o,t){return r("currency")(e,"$",0)}}}]}},e.loadSalesOrganization=function(){console.log("loadSalesOrganization...");var o='[{"busobject":"'+u+'","userid":"'+d+'","levels":[{"field":"'+g+'","option":"","parent":"","values":[{"value":""}]}]}]';e.log="Executing Get Sales Organization<br/>"+e.log;var t=new Date;e.organizationArray=[],e.organizationSelected="",e.channelArray=[],e.channelSelected="",e.divisionArray=[],e.divisionSelected="",e.groupArray=[],e.groupSelected="",e.officeArray=[],e.officeSelected="",e.loadSalesOrganizationProgress=c.execute("Meister.SDK.Dropdown",o),e.loadSalesOrganizationProgress.then(function(o){var r=new Date;console.log("SalesOrderService.execute result",o),e.log="Completed Get Sales Organization<br/>"+e.log,e.log=v(t,r)+"<br/>"+e.log,console.log(o.data.Json[0].dropdown),_.forEach(o.data.Json[0].dropdown,function(o){e.organizationArray.push({label:o.description+" - "+o.name,value:o.description})})},function(e){console.log("SalesOrderService.execute failure",e)})},e.loadDistributionChannel=function(o){console.log("loadDistributionChannel...");var t='[{"busobject":"'+u+'","userid":"'+d+'","levels":[{"field":"'+p+'","option":"","parent":"'+g+'","values":[{"value":"'+o+'"}]}]}]';e.log="Executing Get Distribution Channel<br/>"+e.log;var r=new Date;e.channelArray=[],e.channelSelected="",e.divisionArray=[],
e.divisionSelected="",e.groupArray=[],e.groupSelected="",e.officeArray=[],e.officeSelected="",e.loadDistributionChannelProgress=c.execute("Meister.SDK.Dropdown",t),e.loadDistributionChannelProgress.then(function(o){var t=new Date;console.log("SalesOrderService.execute result",o),e.log="Completed Get Distribution Channel<br/>"+e.log,e.log=v(r,t)+"<br/>"+e.log,console.log(o.data.Json[0].dropdown),_.forEach(o.data.Json[0].dropdown,function(o){e.channelArray.push({label:o.description+" - "+o.name,value:o.description})})},function(e){console.log("SalesOrderService.execute failure",e)}),e.changeGeneric()},e.loadDivision=function(o){console.log("loadDivision...");var t='[{"busobject":"'+u+'","userid":"'+d+'","levels":[{"field":"'+f+'","option":"","parent":"'+p+'","values":[{"value":"'+o+'"}]}]}]';e.log="Executing Get Division<br/>"+e.log;var r=new Date;e.divisionArray=[],e.divisionSelected="",e.groupArray=[],e.groupSelected="",e.officeArray=[],e.officeSelected="",e.loadDivisionProgress=c.execute("Meister.SDK.Dropdown",t),e.loadDivisionProgress.then(function(o){var t=new Date;console.log("SalesOrderService.execute result",o),e.log="Completed Get Division<br/>"+e.log,e.log=v(r,t)+"<br/>"+e.log,console.log(o.data.Json[0].dropdown),_.forEach(o.data.Json[0].dropdown,function(o){e.divisionArray.push({label:o.description+" - "+o.name,value:o.description})})},function(e){console.log("SalesOrderService.execute failure",e)}),e.changeGeneric()},e.loadGroup=function(o){console.log("loadGroup...");var t='[{"busobject":"'+u+'","userid":"'+d+'","levels":[{"field":"'+S+'","option":"","parent":"'+f+'","values":[{"value":"'+o+'"}]}]}]';e.log="Executing Get Groups<br/>"+e.log;var r=new Date;e.groupArray=[],e.groupSelected="",e.officeArray=[],e.officeSelected="",e.loadGroupProgress=c.execute("Meister.SDK.Dropdown",t),e.loadGroupProgress.then(function(o){var t=new Date;console.log("SalesOrderService.execute result",o),e.log="Completed Get Groups<br/>"+e.log,e.log=v(r,t)+"<br/>"+e.log,console.log(o.data.Json[0].dropdown),_.forEach(o.data.Json[0].dropdown,function(o){e.groupArray.push({label:o.description+" - "+o.name,value:o.description})})},function(e){console.log("SalesOrderService.execute failure",e)}),e.changeGeneric()},e.loadOffice=function(o){console.log("loadOffice...");var t='[{"busobject":"'+u+'","userid":"'+d+'","levels":[{"field":"'+m+'","option":"","parent":"'+S+'","values":[{"value":"'+o+'"}]}]}]';e.log="Executing Get Offices<br/>"+e.log;var r=new Date;e.officeArray=[],e.officeSelected="",e.loadOfficeProgress=c.execute("Meister.SDK.Dropdown",t),e.loadOfficeProgress.then(function(o){var t=new Date;console.log("SalesOrderService.execute result",o),e.log="Completed Get Offices<br/>"+e.log,e.log=v(r,t)+"<br/>"+e.log,console.log(o.data.Json[0].dropdown),_.forEach(o.data.Json[0].dropdown,function(o){e.officeArray.push({label:o.description+" - "+o.name,value:o.description})})},function(e){console.log("SalesOrderService.execute failure",e)}),e.changeGeneric()},e.loadShipTo=function(){console.log("loadShipTo...");var o='[{"busobject":"'+u+'","userid":"'+d+'","levels":[{"field":"'+h+'","option":"","parent":"","values":[{"value":""}]}]}]';e.log="Executing Get Ship To<br/>"+e.log;var t=new Date;e.shipToArray=[],e.shipToSelected="",e.loadShipToProgress=c.execute("Meister.SDK.Dropdown",o),e.loadShipToProgress.then(function(o){var r=new Date;console.log("SalesOrderService.execute result",o),e.log="Completed Get Ship To<br/>"+e.log,e.log=v(t,r)+"<br/>"+e.log,console.log(o.data.Json[0].dropdown),_.forEach(o.data.Json[0].dropdown,function(o){e.shipToArray.push({label:o.description+" - "+o.name,value:o.description})})},function(e){console.log("SalesOrderService.execute failure",e)}),e.changeGeneric()},e.init=function(){e.loadSalesOrganization(),e.loadShipTo()},e.changeShipTo=function(o){if(console.log("changeShipTo",o),o&&""!=o){var t='{"VENDOR":"'+o+'","PLANT":"'+o+'","PURORG":"'+o+'"}';e.log="Executing Get Catalog<br/>"+e.log;var r=new Date;e.materialCatalogProgress=c.execute("Meister.Demo.Po.Mat.Catalog",t),e.materialCatalogProgress.then(function(o){var t=new Date;console.log("SalesOrderService.execute result",o),e.log="Completed Get Catalog<br/>"+e.log,e.log=v(r,t)+"<br/>"+e.log,e.materialCatalog=o.data.Json},function(e){console.log("SalesOrderService.execute failure",e)})}e.getSalesPartner(),e.calculateAnalytics()},e.formatSORT_DATE=function(e){return e?8!=e.length?e:e.substring(4,6)+"/"+e.substring(6,8)+"/"+e.substring(0,4):""},e.saveNote=function(o){var t="",r="";"HDR"==e.note.type?(t="Meister.Demo.PP.Hrd.Notes",r='{"ORDERNO":"'+e.orderSelected.value+'","NOTES":[{"TEXT":"'+e.note.text+'"}]}'):"LINE"==e.note.type&&(t="Meister.Demo.PP.Line.Notes",r='{"ORDERNO":"'+e.orderSelected.value+'","LINE_ITEM":"'+e.note.lineNumber+'","NOTES":[{"TEXT":"'+e.note.text+'"}]}'),console.log("endpoint",t),console.log("json",r),e.log="Executing Save Note<br/>"+e.log;var n=new Date;e.addNoteProgress=c.execute(t,r),e.addNoteProgress.then(function(o){var t=new Date;console.log("SaveNote result",o),e.log="Completed Save Note<br/>"+e.log,e.log=v(n,t)+"<br/>"+e.log,e.note={type:"HDR",text:"",lineNumber:1},e.getListNotesByOrder();var r=s.alert({title:"Note Added",textContent:"The note was added successful",ok:"OK"});s.show(r).finally(function(){r=void 0})},function(e){console.log("SalesOrderService.execute failure",e)})},e.addLines=function(){e.salesOrder=[];var o="Meister.Demo.RL.SD.Update";e.disableAddLines=!0;var t='{"ORDERNO":"'+e.orderSelected.value+'","REPEAT":"'+e.multiplier+'","MATERIAL":"'+e.materialSelected[0].MATERIAL+'","QTY":"'+Math.floor(100*Math.random())+'","UOM":"'+e.materialSelected[0].UOM+'"}';console.log("endpoint",o),console.log("json",t),e.log="Executing Add Lines Operation<br/>"+e.log;var r=new Date;e.addLinesProgress=c.execute(o,t),e.addLinesProgress.then(function(o){e.disableAddLines=!1;var t=new Date;console.log("SalesOrderService.execute result",o),e.log="Completed Add Lines Operation<br/>"+e.log,e.log=v(r,t)+"<br/>"+e.log,e.changeOrder(e.orderSelected.value)},function(o){e.disableAddLines=!1,console.log("SalesOrderService.execute failure",o)})},e.formatStandardDeviation=function(e){return e?e.substring(0,2)+"."+e.substring(2,4)+"%":""},e.onSelectMaterialRow=function(){console.log("onSelectMaterialRow",e.materialSelected),e.calculateATS(),e.getSalesPartner()},e.notesFilter=function(o){return 0==e.salesOrderSelected.length?"HDR"==o.LINE.substring(0,3):Number(o.LINE.substring(0,e.salesOrderSelected[0].line_no.length))==Number(e.salesOrderSelected[0].line_no)},e.onSelectSalesOrderRow=function(){console.log("onSelectSalesOrderRow",e.salesOrderSelected),e.getListNotesByOrder()},e.hideMaterials=function(){e.hiddenMaterial=!0},e.showMaterials=function(){e.hiddenMaterial=!1},e.calculateAnalytics=function(){if(e.analytics=null,console.log("calculateAnalytics..."),e.shipToSelected&&e.shipTo2Selected&&e.soldToSelected&&e.payerSelected&&e.organizationSelected&&e.channelSelected&&e.divisionSelected&&e.officeSelected&&e.groupSelected&&3==e.tabSelected){var o="Meister.Demo.RL.Analytics",t='{"SALESORG":"'+e.organizationSelected+'","CHANNEL":"'+e.channelSelected+'","DIVISION":"'+e.divisionSelected+'","SALESGRP":"'+e.groupSelected+'","OFFICE":"'+e.officeSelected+'","SOLDTO":"'+e.soldToSelected+'"}';console.log("endpoint",o),console.log("json",t),e.log="Executing Calulate Analytics<br/>"+e.log;var r=new Date;e.calculateAnalyticsProgress=c.execute(o,t),e.calculateAnalyticsProgress.then(function(o){var t=new Date;console.log("calculateAnalytics result",o),e.log="Completed Calculate Analytics<br/>"+e.log,e.log=v(r,t)+"<br/>"+e.log,e.analytics=o.data.Json[0],console.log("Analytics",e.analytics)},function(e){console.log("SalesOrderService.execute failure",e)})}},e.getListNotesByOrder=function(){console.log("Calculate getListNotesByOrder",e.orderSelected),e.notes=[];var o="Meister.Demo.PP.Read.Notes",t='{"ORDERNO":"'+e.orderSelected.value+'"}';console.log("endpoint",o),console.log("json",t),e.log="Executing Read Notes<br/>"+e.log;var r=new Date;e.getListNotesProgress=c.execute(o,t),e.getListNotesProgress.then(function(o){var t=new Date;console.log("getListNotesByOrder result",o),e.log="Completed Read Notes<br/>"+e.log,e.log=v(r,t)+"<br/>"+e.log,e.notes=o.data.Json,console.log("notes",e.notes)},function(e){console.log("SalesOrderService.execute failure",e)})},e.changeGeneric=function(){0==e.salesHistory.length&&e.getSalesPartner(),null==e.analytics&&e.calculateAnalytics()},e.onSalesHistorySelected=function(){console.log("onSalesHistorySelected",e.salesHistorySelected)},e.getSalesPartner=function(){if(console.log("getSalesPartner..."),e.salesHistory=[],e.salesHistorySelected=[],e.dataForGraphicReport=[],e.labelsForGraphicReport=[],e.shipToSelected&&e.shipTo2Selected&&e.soldToSelected&&e.payerSelected&&e.organizationSelected&&e.channelSelected&&e.divisionSelected&&e.officeSelected&&e.groupSelected){var o="Meister.Demo.RL.Sales.History",t='{"SALESORG":"'+e.organizationSelected+'","CHANNEL":"'+e.channelSelected+'","DIVISION":"'+e.divisionSelected+'","SALESGRP":"'+e.groupSelected+'","OFFICE":"'+e.officeSelected+'","SOLDTO":"'+e.soldToSelected+'"}';console.log("endpoint",o),console.log("json",t),e.log="Executing Get Sales History Operation<br/>"+e.log;var r=new Date;e.salesPartnerProgress=c.execute(o,t),e.salesPartnerProgress.then(function(o){var t=new Date;console.log("Meister.Demo.RL.Sales.History result",o),e.log="Completed Sales History<br/>"+e.log,e.log=v(r,t)+"<br/>"+e.log,e.salesHistory=o.data.Json[0].HISTORY;var n=c.buildSalesHistoryDataForGraphicReports(e.salesHistory);console.log("report",n),e.dataForGraphicReport=n.data,e.labelsForGraphicReport=n.labels,console.log("Histories",e.salesHistory),console.log("dataForGraphicReport",e.dataForGraphicReport)},function(e){console.log("SalesOrderService.execute failure",e)})}},e.showAddNote=function(o){e.salesOrderSelected.length>0?(e.note.type="LINE",e.note.lineNumber=e.salesOrderSelected[0].line_no,e.note.title="Adding Notes to Line Item "+e.salesOrderSelected[0].line_no):(e.note.type="HDR",e.note.title="Adding Header notes"),s.show({contentElement:"#addNoteDialog",targetEvent:o,clickOutsideToClose:!0}),t(function(){document.getElementById("add_note").focus()},1e3)},e.showAtpDialog=function(e){s.show({contentElement:"#atpContainer",parent:angular.element(document.querySelector("#tablesContainerMain")),targetEvent:e,clickOutsideToClose:!0})},e.showPartnerInfo=function(){console.log("showPartnerInfo..."),e.hiddenPartnerInfo=!1},e.hidePartnerInfo=function(){console.log("hidePartnerInfo..."),e.hiddenPartnerInfo=!0},e.calculateATS=function(){console.log("Calculate ATS",e.materialSelected[0]),e.salesMaterial=[],e.salesMaterialPage=[];var o='{"MATERIAL":"'+e.materialSelected[0].MATERIAL+'","PLANT":"'+e.materialSelected[0].PLANT+'"}';console.log("endpoint","Meister.Demo.RL.Stock"),console.log("json",o),e.log="Executing Calculate ATS<br/>"+e.log;var t=new Date;e.calculateATSProgress=c.execute("Meister.Demo.RL.Stock",o),e.calculateATSProgress.then(function(o){var r=new Date;console.log("calculateATS result",o),e.log="Completed Calculate ATS<br/>"+e.log,e.log=v(t,r)+"<br/>"+e.log,e.ats=o.data.Json[0].DETAILS[0].DETAIL,e.salesMaterial=o.data.Json[0].DETAILS[0].MRP,console.log("ats",e.ats)},function(e){console.log("SalesOrderService.execute failure",e)})},e.showLogs=function(e){s.show({contentElement:"#myDialog",targetEvent:e,clickOutsideToClose:!0})},e.changeOrder=function(o){if(console.log("Payer",e.payerSelected),!o)return void(e.salesOrder=[]);if("NEW"==o.value){e.salesOrder=[];var t="Meister.Demo.RL.SD.New.Parked",r='{"DOCTYPE":"CM","SALESORG":"'+e.organizationSelected+'","DIST":"'+e.channelSelected+'","DIVISION":"'+e.divisionSelected+'","SALESGRP":"'+e.groupSelected+'","SALESOFF":"'+e.officeSelected+'","SOLDTO":"'+e.soldToSelected+'","PAYER":"'+e.payerSelected+'"}';console.log("endpoint",t),console.log("json",r),e.log="Executing New SO<br/>"+e.log;var n=new Date;e.readOrderProgress=c.execute(t,r),e.readOrderProgress.then(function(o){var t=new Date;console.log("SalesOrderService.execute result",o),e.log="Completed New SO<br/>"+e.log,e.log=v(n,t)+"<br/>"+e.log;var r=o.data.Json[0].ORDERNO;r=r.substring(r.length-5,r.length);var l={label:r,value:r};e.orderArray.push(l),e.orderSelected=l,e.getListNotesByOrder()},function(e){console.log("SalesOrderService.execute failure",e)})}else{e.getListNotesByOrder();var t="Meister.Demo.RL.SD.Read",r='{"ORDER":"'+o.value+'"}';e.log="Executing Read SO<br/>"+e.log;var n=new Date;e.readOrderProgress=c.execute(t,r),e.readOrderProgress.then(function(o){var t=new Date;e.disableAddLines=!1,console.log("SalesOrderService.execute result",o),e.log="Completed Read SO<br/>"+e.log,e.log=v(n,t)+"<br/>"+e.log,e.salesOrder=o.data.Json[0].lineitem},function(o){e.disableAddLines=!1,console.log("SalesOrderService.execute failure",o)})}}}])}(meister);